<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async and Wait</title>
</head>
<body>
<script>
// Although promise chaining is effective, there is a cleaner and more readable alternative to handle asynchronous operations in JavaScript: async and await.
// The async and await keywords make working with Promises easier. They let you write asynchronous code that looks like synchronous code.

// 1. An async function is a function that returns a Promise.
// Inside an async function, you can write asynchronous code that looks and behaves like synchronous code, making it easier to read and maintain.

// Creating an async Function
// To create an async function, simply add the async keyword before the function declaration.
async function fetchData() {
  // code to fetch data
}

//2. await keyword in async function
// Inside an async function, you can use the await keyword to pause the process of the function until that Promise is resolved.

async function myAsync() {
  let data = await fetch('https://api.programiz.pro/api/Demo/javascript/movies');
  let text = await data.text();
 
  console.log(text);
};
 
myAsync();

// Here,
// await fetch('https://api.programiz.pro/api/Demo/javascript/movies') pauses the function execution until the fetch request is complete.
// await data.text() pauses the function execution until the text is retrieved.
// The console.log(text) statement is executed lastly.

// Return of async Function
// async function returns a Promise. For example,

async function myAsync() {
  let data = await fetch('https://api.programiz.pro/api/Demo/javascript/movies');
  let text = await data.text();
 
 return text;
}
 
console.log(myAsync()) // Output: Promise { <pending> }
 
myAsync().then((data) => console.log(data))


//Error handling:
//Using try...catch with async/await

async function fetchData(url) {
  try {

    let response = await fetch(url);
    let data = await response.json();

    return data;

  } catch (error) {

    // handle error
    console.error('error'); // Output: error
  }
}

fetchData('https://api.programiz.pr/demo/javascript/invalid');


</script>
</body>
</html>